/*! acceda  
   2019-04-25  
*/

function showsubmenu(a){$(a).addClass("is-open"),$(a).children(".mf-appmenu--submenu").addClass("is-visible").attr("aria-hidden","false")}function hidemenu(a){$(a).removeClass("is-open"),$(a).children(".mf-appmenu--submenu").removeClass("is-visible").attr("aria-hidden","true")}var $mf={};$mf.fijar_cabecera=function(a,b,c,d,e,f){b.children().css("position","absolute");var g=a.height(),h=function(){a.one("headmasscroll_h",function(a){$(a.currentTarget).wrap('<div id="'+c+'h" style="height:'+g+'px"></div>').addClass(d),i()})},i=function(){a.one("headmenosscroll_h",function(a){$(a.currentTarget).unwrap(),$(a.currentTarget).removeClass(d),h()})},j=function(){b.scrollTop()>g&&a.trigger("headmasscroll_h"),b.scrollTop()<g&&a.trigger("headmenosscroll_h")};a.hasClass("not-fixed")||(h(),b.scroll(function(){j()})),j()},$(document).ready(function(){$(document).click(function(){$(".dropdownbtn-menu").removeClass("is-open").addClass("visuallyHidden")}),$(".multiDropdown, .dropdownbtn-btn").each(function(a,b){$(b).on("click",function(a){a.preventDefault(),$(a.currentTarget).parent().siblings(".dropdownbtn-menu").removeClass("visuallyHidden").addClass("is-open"),a.stopImmediatePropagation()})});$('<a href="#!" class="mf-icon mf-icon-cancel mf-msg--closebtn" title="Ocultar mensaje">Ocultar</a>').prependTo($('[class^="msg-"].is-hidable')).on("click",function(){$(this).parent().hide()}),$("#header").data("scroll_disable")||$mf.fijar_cabecera($("#header"),$(window),"mf-header--wrapper","mf-header__compact",!1),$(".mf-appmenu--button").click(function(a){a.preventDefault(),$("body").toggleClass("is-open-menu"),$(a.currentTarget).closest(".mf-appmenu--title").siblings(".mf-appmenu--menu").addClass("is-mobile")}),$(".mf-topbar-button").click(function(a){a.preventDefault(),$("body").toggleClass("is-open-topbar")});var a=function(){var a=$(".mf-header");if(a.hasClass("mf-header__compact")){$("body").removeClass("mf-long-menu"),$("body").removeClass("mf-long-menu__app");var b,c,d;if($("body").hasClass("mf-long-menu__compact"));else{b=$(".mf-logo").outerWidth(),c=$(".mf-appmenu").outerWidth(),d=$(".mf-app-title").outerWidth();var e,f=parseFloat(b+d+c);localStorage.setItem(e,f)}var g=localStorage.getItem(e,f);if(void 0!=g){var a=$(".mf-header"),h=$(window).width();h<=g?$("body").addClass("mf-long-menu__compact"):h>g&&$("body").removeClass("mf-long-menu__compact")}}else if($("body").removeClass("mf-long-menu__compact"),$("body").hasClass("portal")||$("body").hasClass("sede")){if($("body").hasClass("mf-long-menu"));else{var i,c=parseFloat($(".mf-appmenu--menu").outerWidth()+5);localStorage.setItem(i,c)}var g=localStorage.getItem(i,c);if(void 0!=g){var j=$(".mf-appmenu").width();j<=g?$("body").addClass("mf-long-menu"):j>g&&$("body").removeClass("mf-long-menu")}}else if($("body").hasClass("app")){var k=$(".mf-header"),b=$(".mf-logo--img").width(),l=$(".mf-logo").width(),m=$(".mf-topbar--container").outerWidth(),h=$(window).width(),d=$(".mf-app-title").outerWidth();if($("body").hasClass("mf-long-menu__app"));else{var n,c=parseFloat($(".mf-appmenu--menu").outerWidth()+5);localStorage.setItem(n,c)}var o=localStorage.getItem(n);void 0!=o&&(h<=parseFloat(parseFloat(o)+parseFloat(b)+parseFloat(20))?a.addClass("mf-header__logo-small"):a.removeClass("mf-header__logo-small"),l=$(".mf-logo").width(),h<=parseFloat(parseFloat(o)+parseFloat(l))&&b>l?$("body").addClass("mf-long-menu__app"):$("body").removeClass("mf-long-menu__app")),h<=parseFloat(l+m+d)?k.addClass("mf-header__topbar-adjust"):k.removeClass("mf-header__topbar-adjust"),h<=parseFloat(l+m)?k.addClass("mf-header__topbar-hide"):k.removeClass("mf-header__topbar-hide")}},b=$(window).width();$(window).resize(function(){$(window).width()!=b&&(b=$(window).width(),a(),a())}),$(window).scroll(function(){a()}),a()});var hassm=$(".has-submenu"),issm=$(".mf-appmenu--submenu");$(hassm).each(function(a){$(this).attr("id")||$(this).attr({id:"js-has-sm-"+a})}),$(hassm).attr({tabindex:"0",role:"menuitem","aria-haspopup":"true"}),$(issm).attr({"aria-hidden":"true"}),$('.has-submenu > a[href="#"]').each(function(){$(this).attr({tabindex:"-1"})}),$(".mf-appmenu--submenu > li").each(function(){$(this).attr({role:"menuitem","aria-labelledby":$(this).closest(".has-submenu").attr("id")})}),$(hassm).on("mouseover",function(){showsubmenu(this)}),$(hassm).on("mouseout mouseleave",function(){hidemenu(this)}),$(hassm).on("keypress",function(a){0!==a.keyCode&&32!==a.keyCode&&13!==a.keyCode||(a.preventDefault(),$(this).is(".is-open")?(hidemenu(this),$(this).focus()):showsubmenu(this))}),$(hassm).on("focusout",function(){var a=$(this);setTimeout(function(){!!(a.find(":focus").length>0)||hidemenu(a)},10)}),$(hassm).on("click",function(a){$(this).is(".is-hold")?$(this).removeClass("is-hold"):$(this).addClass("is-hold")}),$mf.cargaDinamicaJS=function(){var a,b=[];for(var c in arguments){var d=arguments[c];if("string"==typeof d)b.push(d);else if("function"==typeof d)a=d;else if(d.length)for(var e in d)b.push(d[e])}if(b.length>0){var f=document.createElement("script");f.type="text/javascript",f.async=!0,f.onload=function(){b.splice(0,1),0===b.length?"function"==typeof d&&a():$mf.cargaDinamicaJS(b)},f.src=b[0],document.getElementsByTagName("head")[0].appendChild(f)}},$mf.Dialog=function($dialogo,classes,$dialog_parent){function draggable(){this.$title_bar.on("mousedown",function(e){var init_x=e.clientX,init_y=e.clientY,pos_ini_x=$(e.currentTarget).offset().left,pos_ini_y=$(e.currentTarget).offset().top,width=$dialogo.outerWidth(),height=$dialogo.outerHeight();$dialogo.addClass("on_move"),$("body").addClass("is-no-selectable"),self.datos.drag_container?$("body").on("mousemove",function(e){function getSplitData(){return self.datos.split&&("string"==typeof self.datos.split&&(self.datos.split=eval(self.datos.split),"object"!=typeof self.datos.split&&(self.datos.split=!0)),!0===self.datos.split&&(self.datos.split={}),self.datos.split&&(self.datos.split.toSplit=self.datos.split.toSplit||20,self.datos.split.shadowColor=self.datos.split.shadowColor||"red",self.datos.split.placesToSplit=self.datos.split.placesToSplit||"top bottom left right",self.datos.split.container=self.datos.split.container||$container,"string"==typeof self.datos.split.container?self.datos.split.container=$(self.datos.split.container):void 0===self.datos.split.container&&(self.datos.split.container=$container),"string"==typeof self.datos.split.placesToSplit&&(self.datos.split.placesToSplit=self.datos.split.placesToSplit.split(" ")))),self.datos.split}function checkSplit(a){return"top"==a&&pos.top<self.datos.split.toSplit||"left"==a&&pos.left<self.datos.split.toSplit||"bottom"==a&&pos.top>$dialogo.innerHeight()-self.datos.split.toSplit||"right"==a&&pos.top>$dialogo.innerWidth()-self.datos.split.toSplit}function showShadow(a){var b="";"top"==a?b="left: 0; top: 0; width: "+w_container+"px; height: "+self.datos.split.toSplit+"px;":"bottom"==a?b="left: 0; top: "+h_container-self.datos.split.toSplit+"px; width: "+w_container+"px; height: "+self.datos.split.toSplit+"px;":"left"==a?b="left: 0; top: 0; width: "+self.datos.split.toSplit+"px; height: "+h_container+"px;":"right"==a&&(b="left: "+w_container-self.datos.split.toSplit+"px; top: 0; width: "+self.datos.split.toSplit+"px; height: "+w_container+"px;");var c=$('<div class="js-dialog_split_shadow" data-place="'+a+'" style="position: absolute; background-color: '+self.datos.split.shadowColor+";opacity: 0.25; "+b+'">');$container.append(c)}var pos={},$container=$(self.datos.drag_container),pos_container=$container.position(),w_container=$container.width(),h_container=$container.height();e.clientX-init_x+pos_ini_x<pos_container.left?pos.left=pos_container.left:e.clientX-init_x+pos_ini_x>pos_container.left+w_container-width?pos.left=pos_container.left+w_container-width-1:pos.left=e.clientX-init_x+pos_ini_x,e.clientY-init_y+pos_ini_y<pos_container.top?pos.top=pos_container.top:e.clientY-init_y+pos_ini_y>pos_container.top+h_container-height?pos.top=pos_container.top+h_container-height-1:pos.top=e.clientY-init_y+pos_ini_y,$dialogo.css(pos);var splitData=getSplitData();if(splitData){$container.find(".js-dialog_split_shadow").remove();for(var isShadow=!1,i=0;i<self.datos.split.placesToSplit.length;i++){var placeToSplit=self.datos.split.placesToSplit[i];if(checkSplit(placeToSplit)){showShadow(placeToSplit),isShadow=!0;break}}}}):$("body").on("mousemove",function(a){var b={};a.clientX-init_x+pos_ini_x<=0?b.left=0:a.clientX-init_x+pos_ini_x>window_w-width?b.left=window_w-width-1:b.left=a.clientX-init_x+pos_ini_x,!self.es_modal&&a.clientY-init_y+pos_ini_y<head_h?b.top=head_h:!self.es_modal&&a.clientY-init_y+pos_ini_y>window_h-height?b.top=window_h-height-1:b.top=a.clientY-init_y+pos_ini_y,$dialogo.offset(b)})}),$("body").on("mouseup",function(a){$("body").off("mousemove"),$("body").removeClass("is-no-selectable"),$dialogo.removeClass("on_move");var b=$(self.datos.drag_container),c=b.find(".js-dialog_split_shadow");if(c.length>0){c.data("place");c.remove()}})}function modal(){var a=$(".mf-veil").show();self.datos.hide_close_button||a.click(self.close_dialog)}var self=this,window_h=$("body").height(),window_w=$("body").width(),head_h=$(".mf-header--container").height(),checkFixedBody=function(){$("body")[($(".mf-dialog").is(":visible")?"add":"remove")+"Class"]("fixed-dialog")},cargar_datos=function(callback){var fireEventLoad=function(e){"function"==typeof e?e(self):"string"==typeof e&&eval(e)(self)}.bind(this);fireEventLoad(self.datos.onbeforeload)||(void 0!=self.datos.url?(self.datos.cargando?callback.call(self,self.datos.cargando):$mf.timer.on(self.$data),$.ajax({method:self.datos.metod||"post",url:self.datos.url,data:self.datos.data_url,crossDomain:!1}).always(function(text){fireEventLoad(self.datos.onload),0==(text.responseText||text).indexOf("<!DOCTYPE html>")?self.datos.reload_mode?window.location.reload():(window.history.pushState({html:text.responseText||text},"",self.datos.url),document.write(text.responseText||text),$mf.init_widgets($(document))):(callback.call(self,text.responseText||text),void 0!=self.datos.init_dialog?"function"==typeof self.datos.init_dialog?self.datos.init_dialog.call(self,self.$data,self):eval(self.datos.init_dialog).call(self,self.$data,self):$mf.init_widgets(self.$data)),$mf.timer.off(self.$data),fireEventLoad(self.datos.onafterload)})):(fireEventLoad(self.datos.onload),callback.call(self,void 0!=self.datos.data?self.datos.data:self.$data),void 0!=self.datos.init_dialog?eval(self.datos.init_dialog).call(self,self.$data):$mf.init_widgets(self.$data),fireEventLoad(self.datos.onafterload)))},max_height=function(a){var b=self.datos.drag_container?.8*$(self.datos.drag_container).outerHeight():.8*($(window).height()-self.$title_bar.outerHeight()-self.$buttons.outerHeight());return a||b},posicionar=function(a){self.$data.css({"max-height":max_height(a.max_height),height:a.height?a.height:"",width:a.width?a.width:""}),void 0==a.position_v&&void 0==a.position_h||$mf.position(self.$el,$(a.aSelect),a.position_v,a.position_h,a.over_v,a.over_h)};this.show=!1,this.datos={},this.resize_content=function(){window_h=$("body").height(),window_w=$("body").width(),posicionar(self.datos)},this.close_dialog=function(e){self.datos.close&&eval(self.datos.close)(),self.datos.visualizer&&self.datos.$reference&&self.datos.$reference.replaceWith(self.$data.children().clone(!0)),self.$el.hasClass("mf-aux_dialog")?self.$el.remove():self.$el.hide(),$(".mf-veil").hide(),$(window).off("resize",this.resize_content),self.show=!1,checkFixedBody(),self.$el.closest(".mf-dialog-camp").removeClass("is-open")},this.min_dialog=function(a){self.$data.hide(),self.$buttons.hide(),self.$min_button.hide(),self.$max_button.show()},this.max_dialog=function(a){self.$data.show(),self.$buttons.hasClass("has-buttons")&&self.$buttons.show(),self.$min_button.show(),self.$max_button.hide()},this.$title_bar=$('<div class="mf-dialog--titlebar"></div>').appendTo($dialogo),this.$title=$('<span class="mf-dialog--title"></span>').appendTo(this.$title_bar),this.$close_button=$('<button class="mf-dialog--btn" title="Cerrar"><span class="mf-icon mf-icon-cancel"></span> Cerrar</button>').appendTo(this.$title_bar).click(self.close_dialog),this.$max_button=$('<button class="mf-dialog--btn" title="Maximizar"><span class="mf-icon mf-icon-max-window"></span> Maximizar</button>').appendTo(this.$title_bar).click(self.max_dialog).hide(),this.$min_button=$('<button class="mf-dialog--btn" title="Minimizar"><span class="mf-icon mf-icon-min-window"></span> Minimizar</button>').appendTo(this.$title_bar).click(self.min_dialog).hide(),this.$data=$('<div class="mf-dialog--content"></div>').appendTo($dialogo),this.$buttons=$('<div class="mf-dialog--buttonbar"></div>').appendTo($dialogo).hide(),this.$el=$dialogo,this.$el.addClass(void 0!=classes?classes:""),void 0!=$dialog_parent&&this.$el.appendTo($dialog_parent),this.appendDialog=function(a,b,c){self.show=!0,self.datos=a,self.es_modal=c,cargar_datos(function(d){void 0==d||d instanceof jQuery&&$(d).hasClass("mf-dialog--content")||self.$data.html(d.responseText?d.responseText:d),void 0!=a.title?self.$title.html(a.title):self.$title.empty(),a.buttons?self.$buttons.html(a.buttons).addClass("has-buttons").show():self.$buttons.empty().removeClass("has-buttons").hide(),(a.is_min||"none"!=self.$data.css("display"))&&(self.$min_button.show(),self.$max_button.hide()),self.$el.removeAttr("class").addClass("mf-dialog"),self.$el.closest(".mf-dialog-camp").addClass("is-open"),void 0!=a.clazz&&self.$el.addClass(a.clazz),self.$el.show(),a.max_height||$(window).on("resize",this.resize_content),b&&draggable.call(this),c&&modal.call(this),a.visualizer?(self.$el.addClass("mf-visualizer"),self.$el.css({width:$(window).width(),height:$(window).height()})):self.$el.removeClass("mf-visualizer"),(self.datos.visualizer||self.datos.hide_resize_button)&&self.$min_button.hide(),self.datos.hide_close_button&&self.$close_button.hide(),posicionar(a),checkFixedBody()})},this.refreshDialog=function(a){var b=function(a){void 0==a||a instanceof jQuery&&$(a).hasClass("mf-dialog--content")||self.$data.html(a.responseText?a.responseText:a)};$.extend(self.datos,a),cargar_datos(b)}},$mf.fixed_heads=function(a,b,c,d){var e=a.data();void 0==b&&(b=e&&void 0!=e.clazz?e.clazz:"mf-table-fixheads"),this.$el=a.find("table"),void 0==c&&(c=e&&void 0!=e.height?e.height:this.$el.outerHeight());var f=this,g=a.wrap('<div class="'+b+'-wrapper"></div>').parent(),h=function(a){var b=!1,c=a.find("tr").children(),d=function(b,d){$(c[b]).css({width:$(d).outerWidth(),height:$(d).outerHeight(),position:"absolute",left:Math.round($(d).offset().left-a.offset().left)})};0==f.$el.find("td").length?f.$el.css("left",f.corner_head.$el.outerWidth()):f.$el.css("left",0),f.$el.find("tr").first().children().each(function(a,e){b?d(a,e):$(c[a]).width()!=$(e).outerWidth()&&(b=!0,d(a,e))})},i=function(a){var b=f.$el.find("tr");a.find("tr").each(function(a,c){var d=$(b[a]),e=$(c),f=d.height(),g=e.height(),h=f>g?f:g;d.height(h),e.height(h)}),f.$el.find("tr>th:first-child").hide()},j=function(b){var c=void 0!=f.top_head?$(f.top_head.$wrapper).outerHeight():0;a.css("height",b-c),void 0!=f.left_head&&f.left_head.$wrapper.css("height",a.height())},k=function(){void 0!=f.top_head&&f.top_head.$el.parent().scrollLeft(a.scrollLeft()),void 0!=f.left_head&&f.left_head.$el.css("top",-a.scrollTop())},l=function(a,c){this.$el=f.$el.clone().empty().append(f.$el.children("thead")).addClass(b+"--top").css("width",f.$el.width()),this.$wrapper=$('<div class="'+b+'--top-container"></div>'),this.render=function(){if(a&&"object"!=typeof c){var d=f.$el.children("tbody").find("th:first").index();this.$el.find("th:eq("+(void 0!=c?c:-1!=d?d:0)+")").remove()}var i=this.$el,j=this.$el.children("thead").clone().prependTo(f.$el);e.small_cells&&j.find("th").empty(),this.$wrapper.append(this.$el).height(f.$el.children("thead").outerHeight()),this.$el.find("th").each(function(a,b){var c=$(b);c.find(".right-border-head").on("mousedown",function(b){c.on("resize",function(b,c){j.find("th:eq("+a+")").css({"min-width":c,"max-width":c}),f.$el.find("tr").each(function(b,d){$(d).find("td:eq("+a+")").css({"min-width":c,"max-width":c})}),h(i)})})}),g.prepend(this.$wrapper),f.$el.css("top",-f.$el.children("thead").outerHeight()).addClass(b+"--main-table")}},m=function(a){var c=function(a){var b=$("<table></table>"),c=$("<thead></thead>").appendTo(b),d=$("<tbody></tbody>").appendTo(b);if($trs=f.$el.children("tbody").children("tr"),$ths=f.$el.children("thead").find("th"),void 0==a){var e=$trs.find("th:first").index();c.append($("<tr></tr>").append(-1!=e?$($ths[e]):$($ths[0]).clone(!0))),$trs.each(function(a,b){d.append($("<tr></tr>").append(-1!=e?$(b).children("th:first"):$(b).find("td:first").css("height",$(b).find("td:first").outerHeight())))})}else c.append($("<tr><th>"+$($ths[a]).html()+"</th></tr>")),$trs.each(function(b,c){d.append($("<tr></tr>").append($(c).children("td:eq("+a+")").css("height",$(c).find("td:first").outerHeight())))});return b},d="";d="object"==typeof a?a:isNaN(a)?c():c(a),this.$el=d.addClass(b+"--left"),this.$wrapper=this.$el.wrap('<div class="'+b+'--left-container"></div>').parent(),this.render=function(){g.prepend(this.$wrapper),$('<div class="button-row button-container"></div>').appendTo(this.$wrapper.parent())}},n=function(){this.$el=f.left_head.$el.clone().empty().append(f.left_head.$el.find("th:first")).removeClass(b+"--left").addClass(b+"--corner").css("height",f.$el.children("thead").outerHeight()),this.$wrapper=this.$el.wrap('<div class="'+b+'--corner-container"></div>').parent(),this.render=function(){var a=this.$el.outerWidth(),b=this.$el.children().outerWidth();this.$wrapper.height(f.$el.children("thead").outerHeight()).css({width:a+2,overflow:"hidden"}),g.prepend(this.$wrapper),b>f.left_head.$el.outerWidth()?(f.left_head.$el.css("width",b),f.left_head.$el.parent().css("width",b+2)):this.$wrapper.css("width",f.left_head.$el.outerWidth()+2)}};this.render=function(b,f,g){var o=$("body").height();f&&(this.left_head=new m(g),this.left_head.render()),b&&(this.top_head=new l(f,g),this.top_head.render()),b&&f&&(this.corner_head=new n,this.corner_head.render()),this.top_head?h(this.top_head.$el):this.left_head&&i(this.left_head.$el),j(c),a.on("scroll",k),e&&e.height||d||$(window).resize(function(a){setTimeout(function(){var a=c-(o-$("body").height());a=e&&void 0!=e.min_height?a>e.min_height?a:e.min_height:a,j(a)},10)})},this.resize=function(){h(f.top_head.$el)},a.hasClass("mf-table-fixheads__left")?this.render(!1,!0,e.column):a.hasClass("mf-table-fixheads__top")?this.render(!0,!1,e.column):a.hasClass("mf-table-fixheads")&&this.render(!0,!0,e.column)},$mf.AjaxModal=function(a){var b=function(a){var b=function(b){if(b.url=b.url?b.url:a[0].href,a.hasClass("new_dialog")){var c=new $mf.Dialog($('<div class="mf-dialog mf-aux_dialog">').appendTo($('<div class="mf-dialog-camp"/>').appendTo("body")));b.init_dialog=b.init_dialog?b.init_dialog:$mf.init_widgets,b.modal&&$(".mf-veil").show(),c.appendDialog(b,b.draggable,b.modal)}else b.only_in_dialog?window.location.href=b.url:(b.init_dialog=b.init_dialog?b.init_dialog:$mf.init_widgets,$mf.my_dialog.close_dialog(),b.modal&&$(".mf-veil").show(),$mf.my_dialog.appendDialog(b,b.draggable,b.modal))};a[0].type&&"submit"==a[0].type?a.closest("form").on("submit",function(c){c.preventDefault();var d=$.extend({},$(c.currentTarget).data());d.url=d.url?d.url:a.closest("form")[0].action,d.data_url=d.data_url?d.data_url:a.closest("form").serializeArray(),b(d)}):a.off("click").on("click",function(a){a.preventDefault();var c=$.extend({},$(a.currentTarget).data());b(c)})};a?a.is(".open_in_dialog")?b(a):a.find(".open_in_dialog").each(function(a,c){b($(c))}):$(".open_in_dialog").each(function(a,c){b($(c))})};var antop=document.querySelector(".mf-anchor_top"),maxopacity=".8",fadeOut=function(a){a.style.opacity=maxopacity,function b(){(a.style.opacity-=.1)<0?a.style.display="none":requestAnimationFrame(b)}()},fadeIn=function(a,b){a.style.opacity=0,a.style.display=b||"block",function b(){var c=parseFloat(a.style.opacity);(c+=.1)>maxopacity||(a.style.opacity=c,requestAnimationFrame(b))}()},showanchor=function(a){var b=window.pageYOffset|document.body.scrollTop,c=Math.max(document.documentElement.clientHeight);a.classList.contains("is-hidden")?b>.5*c&&(fadeIn(a),a.classList.remove("is-hidden"),a.classList.add("is-visible")):b<=.5*c&&(fadeOut(a),a.classList.remove("is-visible"),a.classList.add("is-hidden"))};window.onscroll=function(){antop&&showanchor(antop)},$mf.autocomplete=function(a){var b=function(a,b,c){var d,e={};for(d in a)if("all"==a[d])e.push.apply($("#"+c).closest("form").serialize());else if(c&&a[d]){var f=[];$('[name^="'+c+"["+a[d]+']"]').each(function(a,b){f.push(b.value)}),e[c+"["+a[d]+"]"]=JSON.stringify(f)}for(d in b)"function"==typeof $mf.autocomplete[b[d]]&&(e[b[d]]=$mf.autocomplete[b[d]]());return e};this.init=function(){var a=$(this),c=this,d=a.data(),e=function(a){var b=[];return $.ajax({type:"POST",url:d.jsonurl,data:{values:a},success:function(a){$.each(a,function(a,c){b.push($.extend({id:c.value,text:c.label},c))})},dataType:"json",async:!1}),b};d.parent_selectable=void 0===d.parent_selectable||d.parent_selectable,this.opciones={datos:d,width:d.width||"resolve",placeholder:"Buscar...",minimumInputLength:d.min_input_length?d.min_input_length:0,dropdownAutoWidth:!0,formatNoMatches:function(a){return'<li class="select2-no-results">No existen resultados</li>'},formatSearching:function(){return'<li class="select2-searching">Buscando...</li>'},formatInputTooShort:function(a,b){return'<li class="select2-no-results">Por favor introduzca al menos '+b+" "+(1==b?"caracter":"caracteres")+"</li>"},formatSelectionTooBig:function(a){return'<li class="select2-selection-limit">Sólo puede seleccionar '+a+" "+(1==a?"elemento":"elementos")+"</li>"},formatLoadMore:function(a){return"Cargando más resultados..."},triggerChange:!0,ajax:{url:function(a,b){return d.url+(a?"/"+a:"")},type:"POST",dataType:"json",data:function(a,c){var e=[];$("#autocomplete_"+d.autocomplete).children("input").each(function(a,b){e.push($(b).val())});var f=b(d.params&&d.params.split(/,\s*/)||[],d.callback_params?d.callback_params.split(/,\s*/):[],d.form);return f.values=e.length<1?[""]:e,f},results:function(b,c){function d(a,b){for(var c=b.split("."),d=a,e=0;e<c.length&&(d=d[c[e]]);e++);return d}function e(a,b){if(!b)return e(a,k);for(var c=0;c<b.length;c++){var d=b[c];if(d.id==a)return d;if(d.children){var f=e(a,d.children);if(f)return f}}return null}function f(a){var b="label";if(b){b=function(a){return a==h?"id":a==i?"text":"raw."+a}(b);var c=!!g.sort_desc&&g.sort_desc,e=a.sort(function(a,e){var f=d(a,b),g=d(e,b);return f==g?0:f>g?c?-1:1:c?1:-1});$(e).each(function(a,b){b.children&&f(b.children)})}else e=a;return e}var g=a.data(),h=g.field_id?g.field_id:"value",i=g.field_text?g.field_text:"label",j=(g.field_parent&&g.field_parent,g.field_id_parent?g.field_id_parent:"extra_params.id_parent"),k=[],l=function(a){var c;return $(b).each(function(b,e){if(d(e,h)==a)return c=e,!1}),c};return $(b).each(function(a,b){var c=function(a){var b=d(a,h),f=e(b);if(!f){f={id:b,text:d(a,i),children:[]};var g,m=l(d(a,j));if(m){var g=e(m.value);g||(g=c(m))}else g=k;g.children?g.children.push(f):g.push(f)}return f};c(b)}),{results:f(k)}}},formatAjaxError:function(a,b,c){if(428==a.status){var d=JSON.parse(a.responseText);d.buttons=[$("<button "+(void 0!=d.cancel_clazz?'class="'+d.cancel_clazz+'"':"")+">"+(void 0!=d.cancel_label?d.cancel_label:"Cancelar")+"</button>").click(function(){$mf.my_dialog.close_dialog()}),$("<button "+(void 0!=d.accept_clazz?'class="btn-primary '+d.accept_clazz+'"':"")+">"+(void 0!=d.accept_label?d.accept_label:"Aceptar")+"</button>").click(function(){window.location.href=d.action})],$mf.my_dialog.appendDialog(d,!1,!0)}return"Error en la carga."},initSelection:function(a,b){"function"==typeof window["values_"+d.autocomplete]&&(window["values_"+d.autocomplete]=window["values_"+d.autocomplete]());var f=window["values_"+d.autocomplete],g=[];""!=a.val()&&(void 0==f?f=[]:$.isArray(f)||(f=[f]),$(a.val().split(/,\s*/)).each(function(a,b){var c=1;if($(f).each(function(a,d){if(d&&d.id==b)return c=0,g.push(d),0}),c){var h=e(b),i=h.length&&h[0];h.length&&$.isArray(window["values_"+d.autocomplete])?window["values_"+d.autocomplete].push(i):window["values_"+d.autocomplete]=i,h.length&&g.push(i)}})),0!=g.length&&b(g),h.call(c,$.Event)},multiple:!0},d.multiple?this.opciones.closeOnSelect=!1:this.opciones.maximumSelectionSize=1,void 0===d.template&&(d.template=""),d.template.length>0&&$.extend(this.opciones,{formatResult:$mf.autocomplete[d.template],formatSelection:$mf.autocomplete[d.template]}),d.newitems&&$.extend(this.opciones,{createSearchChoice:function(a,b){if(0===$(b).filter(function(){return 0===this.text.localeCompare(a)}).length)return{id:a,text:a}},createSearchChoicePosition:function(a,b){a.splice(0,0,b)}}),d.resultslist&&$.extend(this.opciones,{resultsList:$(d.resultslist),closeOnSelect:!1}),d.initdata&&(this.opciones.initData=d.initdata),d.multiple&&d.max_values&&(this.opciones.maximumSelectionSize=d.max_values),d.research_at_end&&(this.opciones.research_at_end=!0),d.url_help&&($mf["help_"+d.autocomplete]=function(b,c){$mf.init_widgets(b),b.off("click").on("click","a",function(b){b.preventDefault(),a.select2("val",[$(b.currentTarget).data("id")]).siblings("div").addClass("is-selected"),c.close_dialog()})});var f=function(a,b){var c=a.siblings("input");if(a.val()==b&&a.val(""),c.each(function(a,c){$(c).val()==b&&$(c).remove()}),!a.val()&&a.next().val()&&(a.val(a.next().val()),a.next().remove()),!c.length){var d=a[0].name;"[]"==d.substr(d.length-2,d.length-1)&&(a[0].name=d.substr(0,d.length-2))}},g=function(a){$((a.val().match(/\[(.*)\]/)&&a.val().match(/\[(.*)\]/)[1]||a.val()).split(/,\s*/)).each(function(b,c){0==b?(a.val(c),"[]"!=a.attr("name").substr(a.attr("name").length-2,2)&&a.attr("name",a[0].name+"[]")):$("<input>").attr({type:"hidden",name:a[0].name,value:c}).appendTo(a.parent())})},h=function(a){void 0!=a.added?d.multiple?""!=$(this).val()?g($(this)):this.value=a.val:(a.removed&&f($(this),a.removed.id),this.value=a.val,$(this).siblings(".select2-container").find(".select2-search-field").hide(),$(this).addClass("is-selected")):(a.removed&&f($(this),a.removed.id),d.multiple?""!=$(this).val()&&g($(this)):void 0!=a.removed?($(this).siblings(".select2-container").find(".select2-search-field").show(),$(this).removeClass("is-selected")):$(this).siblings(".select2-container").find(".select2-search-choice").length>0&&($(this).siblings(".select2-container").find(".select2-search-field").hide(),$(this).addClass("is-selected")))};$mf.autocomplete.instances||($mf.autocomplete.instances={}),$mf.autocomplete.instances[this.id]=this.opciones,a.select2(this.opciones).on("change",h).on("select2-selecting",function(a){!d.parent_selectable&&a.object.children&&a.object.children.length&&a.preventDefault()})},a?a.is("[data-autocomplete]")?this.init.call(a):a.find("[data-autocomplete]").each(this.init):$("[data-autocomplete]").each(this.init)},$mf.ConfNav=function(a){var b=function(a,b){$(b).click(function(a){a.preventDefault();var b=$(a.currentTarget).data();!$(this).is("input")||this.checked?(this.checked=!1,b.buttons=[$("<button "+(void 0!=b.cancel_clazz?'class="'+b.cancel_clazz+'"':"")+">"+(void 0!=b.cancel_label?b.cancel_label:"Cancelar")+"</button>").click(function(){$mf.my_dialog.close_dialog()}),$("<button "+(void 0!=b.accept_clazz?'class="btn-primary '+b.accept_clazz+'"':"")+">"+(void 0!=b.accept_label?b.accept_label:"Aceptar")+"</button>").click(function(){window.location.href=b.action})],$mf.my_dialog.appendDialog(b,!1,!0)):window.location.href=b.action})};a?a.hasClass("mf-dialog-confirm-nav")?this.init(0,a):a.find(".mf-dialog-confirm-nav").each(b):$(".mf-dialog-confirm-nav").each(b)},$mf.Cookies=function(a){this.mainClass="mf-cookies",this.okClass="mf-cookies--accept",this.infoClass="mf-cookies--info",this.init=function(){var a;1==arguments.length?a=arguments[0]:2==arguments.length&&(a=$(arguments[1])),this.$el=a,this.data=a.data(),this.data.cookie_name=this.data.cookie_name?this.data.cookie_name:"legal",this.data.cookie_value=this.data.cookie_value?this.data.cookie_value:"1",this.data.cookie_valid=this.data.cookie_valid?this.data.cookie_valid:365,this.data.easy_accept=void 0===this.data.easy_accept||this.data.easy_accept,this.data.url_ga=this.data.url_ga?this.data.url_ga:"",this.data.url=this.data.url?this.data.url instanceof Array?this.data.url:[this.data.url]:"",this.getCookie()!=this.data.cookie_value?(a.show(),a.find("."+this.okClass).on("click",this.aceptarCookies),this.data.easy_accept&&$(window).one("scroll",this.aceptarCookies)):this.closePanel()}.bind(this),this.getCookie=function(){return $.cookie(this.data.cookie_name)}.bind(this),this.setCookie=function(){$.cookie(this.data.cookie_name,this.data.cookie_value,{expires:this.data.cookie_valid,path:"/"})}.bind(this),this.closePanel=function(){this.$el.hide(),this.data.url_ga&&"undefined"==typeof ga&&$('<script src="'+this.data.url_ga+'">').appendTo("body"),this.data.url.length&&$mf.cargaDinamicaJS(this.data.url)}.bind(this),this.aceptarCookies=function(a){var b=$(a.currentTarget);b.hasClass(this.infoClass)&&b.parents("."+this.mainClass).length>0?a.stopPropagation():(this.setCookie(),this.closePanel())}.bind(this),a?a.is("."+this.mainClass)?this.init.call(a):a.find("."+this.mainClass).each(this.init):$("."+this.mainClass).each(this.init)},$mf.DataGrid=function(a){var b=function(a,b){$(b).click(e)},c=function(a,b){var c=$(b),g=c.parent().find("table"),h=c.children("form");if(!h.is(":visible")){c.siblings(".grid-header");c.siblings(".grid-header").find("a.mf-filter--title").click(function(a){var b=$(a.currentTarget);b.hasClass(".js-datagrid--filter-title-new")?b.closest(".js-datagrid--header-tools").next(".js-datagrid--filter").toggleClass("is-hidden"):h.toggle(),h.find(".mf-datagrid--filter-content").css("max-height",g.parent(".mf-datagrid--table-container").outerHeight()-h.find(".mf-datagrid--filter-submitbar").outerHeight())})}c.hasClass("js-datagrid--filter")&&c.siblings(".js-datagrid--header-tools").find(".js-datagrid--filter-title").off("click").click(function(a){var b=$(a.currentTarget);b.hasClass("is-open")?(b.removeClass("is-open"),c.addClass("is-hidden")):(b.addClass("is-open"),c.removeClass("is-hidden"))}),h.find(".js-filter--toggle").click(function(a){$(this).next().toggle(),$(this).toggleClass("is-open")}).next().toggle(),h.find(".mf-datagrid--filter-content").css("max-height",g.parent(".mf-datagrid--table-container").outerHeight()),c.find(".morfos-autocomplete").each(d),h.submit(function(a){a.preventDefault;var b=$(a.currentTarget);return $mf.timer.on(b.closest("div[id^=grid_]")),$.post($(this).attr("action"),$(this).serialize(),function(a){f(a,b)}),!1}),h.find("button.clearForm").click(e)},d=function(a,b){$(b).find("#form_autocompleter").on("change",function(a){$(b).siblings("[type=dsic_morfos_autocompleter]").val(this.value)})},e=function(b){b.preventDefault(),a=$(b.currentTarget);var c=void 0==a.attr("href")?a.data("url"):a.attr("href");$mf.timer.on(a.closest("div[id^=grid_]")),$.get(c).done(function(b){f(b,a)})},f=function(a,b){var c=$(a),d=c.attr("id"),e=b.closest("mf-datagrid--content");e.find("table");b.closest("div#"+d).replaceWith(c),$mf.timer.off(),$mf.init_widgets(c)};a?(a.find("th>a.mf-sort-ln").each(b),new $mf.fixed_heads(a.find(".mf-datagrid--table-container")),a.find(".mf-filter").each(c)):($("th>a.mf-sort-ln").each(b),new $mf.fixed_heads($(".mf-datagrid--table-container")),$(".mf-filter").each(c))},$mf.Datepicker=function(a,b){var c=function(a){"date"==a.attr("type")&&a.attr("type","text");var c;c=void 0!=a.attr("data-separator")?a.attr("data-separator"):"-";var d=$.extend({mode:"single",position:"right",format:"dd-mm-yyyy",formatSubmit:"dd-mm-yyyy",starts:1,locale:{daysMin:["D","L","M","X","J","V","S"],
months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]},onBeforeShow:function(){var b=new Date,d=(b.getDate()+100+"").substr(1,2),e=(b.getMonth()+101+"").substr(1,2),f=b.getFullYear();a.DatePickerSetDate(d+c+e+c+f+!0)},onChange:function(a,b){var d=(a.getDate()+100+"").substr(1,2),e=(a.getMonth()+101+"").substr(1,2),f=a.getFullYear();$(b).val(d+c+e+c+f),$(b).DatePickerHide()}},b||{}),e=a.data();"range"==e.mode&&(e.onChange=function(b,c){a.val(b)}),a.DatePicker($.extend(d,e))};a?a.is(".mf-datepicker")?c(a):a.find(".mf-datepicker").each(function(a,b){c($(b))}):$(".mf-datepicker").each(function(a,b){c($(b))})},$mf.dropdown=function(a){var b=function(a,b){var c=$(b);c.removeClass("mf-dropdown__css");var d=c.find(".mf-dropdown--btn"),e=c.find(".mf-dropdown--content");d.click(function(a){a.preventDefault(),c.toggleClass("is-open")}),e.children("li").add(e.children("ul").children("li")).click(function(a){d.hasClass("no_change_title")||(d.find(".mf-dropdown--title").length?d.find(".mf-dropdown--title").text($(this).text()):d.text($(this).text())),d.hasClass("no_change_title")||c.removeClass("is-open")})},c=function(a,b){var c=$(b),d=c.find(".js-dropdown--btn"),e=c.find(".js-dropdown--content");d.off("click").click(function(a){a.preventDefault(),this.slideDropdown(e)}.bind(this)),e.find(".js-dropdown--content-item").click(function(a){c.hasClass("js-dropdown--no-close")||this.slideDropdown(e)}.bind(this)),this.slideDropdown=function(a){a.slideToggle("fast")}.bind(this)}.bind(this);a?a.find(".mf-dropdown--container").each(b):$(".mf-dropdown--container").each(b),a?a.find(".js-dropdown").each(c):$(".js-dropdown").each(c)},$mf.dyn_combo=function(a){var b=".dyn-combo";this.init=function(){var a;if(1==arguments.length?a=arguments[0]:2==arguments.length&&(a=$(arguments[1])),a){var b=a.data();a.change(function(a){var c=$(a.currentTarget),d=c.val();$.post(b.url.replace(b.token,d),function(a){var c=$("#"+b.target);c.empty();for(var d in a)$('<option value="'+d+'">'+a[d]+"</option>").appendTo(c)})})}},a?a.is(b)?this.init.call(a):a.find(b).each(this.init):$(b).each(this.init)},$.fn.getLabel=function(a){return this[0].id?a?$('label[for="'+this[0].id+'"]'):$.trim($('label[for="'+this[0].id+'"]').text()):""},$mf.Formulario=function($el){var init=function(a){init_del(a),init_add(a),a.find("ul").attr("data-index",a.find("ul").children().length);var b=a.find("ul").data();b&&b.max_number&&a.find("ul").children().length>=b.max_number&&a.find("a.collection-add").hide(),$(".js-number-field").off("keydown").keydown(function(a){return!isNaN(a.key)})},init_del=function(a){a.find("a.collection-delete").off("click",sup).on("click",sup)},init_add=function(a){a.find("a.collection-add").off("click",add).on("click",add)},sup=function(a){a.preventDefault();var b=$(a.currentTarget).closest("ul"),c=(b.data(),a.currentTarget.parentElement);""!=c.id?($mf.timer.on(),$.get(a.currentTarget.getAttribute("href")).done(function(d){var e=JSON.parse(d);e.succesful?(c.parentNode.removeChild(c),$(a.currentTarget).hasClass("js-refresh")?location.reload(!0):(console.log(e.succesful),b.siblings("a.collection-add").show(),$mf.timer.off())):alert(e.error)}).fail(function(a){alert(a.statusText),$mf.timer.off()})):(c.parentNode.removeChild(c),b.siblings("a.collection-add").show())},add=function(event){event.preventDefault();var $ul=$(event.currentTarget).siblings("ul"),data=$ul.data(),prototype=data.prototype,index=parseInt($ul.attr("data-index")),regexp=new RegExp("__"+(data.prototype_name||"name")+"__","g"),$newForm=$(prototype.replace(regexp,index));if(init($newForm.appendTo($ul)),$mf.init_widgets($newForm),$ul.attr("data-index",index+1),data&&data.max_number&&$ul.children().length>=data.max_number&&$(event.currentTarget).hide(),data&&data.onload){var fn;"function"==typeof data.onload?fn=data.onload:"string"==typeof data.onload&&(fn=eval(data.onload)),fn&&fn($newForm)}};if(($el&&$el.find("input")||$("input")).one("focus",function(a){$(a.target).one("keyup",function(a){var b=$(a.target);a.target.value&&b.getLabel(!0)&&(b.getLabel(!0).removeClass("is-hidden").addClass("is-show"),b.closest(".fld").addClass("is-edited"))})}),($el&&($el.is(".ajax_submit")&&$el||$el.find(".ajax_submit"))||$(".ajax_submit")).on("submit",function(a){a.preventDefault();var b=$(a.currentTarget),c=$el&&$el.find(b.data("selector_replace"))||$(b.data("selector_replace"));c.trigger("start_refresh"),$mf.timer.on(c),$[b[0].method](b[0].action,b.serializeArray()).done(function(a){c.replaceWith($(a).addClass("content_replaced")),$(".content_replaced").trigger("end_refresh")}).fail(function(a){console.log("Ha fallado submit_ajax:"),console.log(a)}).always(function(){$mf.timer.off(c)})}),($el&&($el.is(".auto_submit")&&$el||$el.find(".auto_submit"))||$(".auto_submit")).on("change",function(a){$(a.currentTarget).is("form")&&$(a.currentTarget).submit()||$(a.currentTarget).closest("form").submit()}),!Modernizr.inputtypes.date){var transform=function(a){var b=/(\d{4})\-(\d{2})\-(\d{2})/;return a.replace(b,"$3-$2-$1")};($el&&$el.find("[type=date].mf-datepicker")||$("[type=date].mf-datepicker")).each(function(a,b){b.value=transform(b.value)})}($el&&($el.is("form")||$el.find("form"))||$("form")).each(function(a,b){$(b).on("reset",function(a){$(b).find("[data-autocomplete]").each(function(a,b){$(b).select2("val","").removeClass("is-selected").siblings("div").removeClass("is-selected"),$(b).parent().find(".select2-search-field").show();var c=b.name;$(b).siblings("input").each(function(a,b){$(b).remove()}),"[]"==c.substr(c.length-2,c.length-1)&&(b.name=c.substr(0,c.length-2))})})}),$el?init($el):$(".morfos-collection").each(function(a,b){init($(b))})},$mf.draw_helps=function(){var helps=this,mfhelpcontainer='<div id="mf-help-container" style="display: none;"></div>',mfhelpoverlay='<div id="mf-help-overlay" style="display: none;"></div>',mfhelpframes='<div id="mf-help-frames" style="display: none;"></div>',$mfhelpNavBar=$('<div id="mf-help-navbar"><a id="mf-help-prevbtn" class="simbutton" href"#!">Previa</a><a id="mf-help-nextbtn" class="simbutton" href"#!">Siguiente</a><a id="mf-help-closebtn" class="simbutton" href"#!">¡Muy bien, entendido!</a><span>o</span> <a href="#!">Necesito saber más, <u>quiero ir a la ayuda</u></a></div>');$('<div id="coverContainer"></div>').appendTo($("body")).append(mfhelpcontainer,mfhelpoverlay,mfhelpframes),$("#mf-help-container").show("blind"),$("#mf-help-overlay").show(),$("#mf-help-frames").show(),$("#mf-help-navbar").show(),this.charge_help=function(index,$helpObject){var helpData=$helpObject.data();$helpObject.addClass("mfhelp-item"),$("#mf-help-overlay").append('<div class="mf-help-tip" id="mf-help-item-'+index+'"></div>');var helpItem={id:"#mf-help-item-"+index,text:null,background:null,title:'<h6 class="mf-help-title">'+helpData.mfhelpTitle+"</h6>"};helpData.mfhelpText&&(helpItem.text='<p class="mf-help-text">'+helpData.mfhelpText+"</p>");var offset=$helpObject.offset(),$helpItem=$(helpItem.id);if(helpData.mfhelpFrame){var itemFrame='<div id="mf-help--item-frame-'+index+'" class="mf-help-frame"></div>';$("#mf-help-frames").append(itemFrame),$("#mf-help--item-frame-"+index).width($helpObject.width()+20).height($helpObject.height()+20).css({left:offset.left-10,top:offset.top-10,position:"absolute"})}if($helpItem.append(helpItem.title,helpItem.text),helpData.mfhelpPos){var top=function(){$helpItem.addClass("top"),$mf.position($helpItem,$helpObject,"top","center",!1,!0)},right=function(){$helpItem.addClass("right"),$mf.position($helpItem,$helpObject,"top","right",!0,!1)},bottom=function(){$helpItem.addClass("bottom"),$mf.position($helpItem,$helpObject,"bottom","left",!1,!0)},left=function(){$helpItem.addClass("left"),$mf.position($helpItem,$helpObject,"center","left",!0,!1)};eval(helpData.mfhelpPos)()}else $helpItem.addClass("left"),$mf.position($helpItem,$helpObject,"center","left",!0,!1)};var data_body=$("body").data();if($mfhelpNavBar.appendTo("#coverContainer").find("#mf-help-closebtn").on("click",function(){$.cookie("show-help",0),$("#coverContainer").remove()}),0!=$("[class*=mfhelp-page]").length){var page=0,carga_inicial=function(){$(".mfhelp-page-0").each(function(a,b){helps.charge_help(a,$(b))})},cargar_page=function(a){page+=a,$(".mfhelp-item").removeClass("mfhelp-item"),$(".mf-help-tip, .mf-help-frame").remove(),$(".mfhelp-page-"+page).each(function(a,b){helps.charge_help(page+"-"+a,$(b))})};carga_inicial(),$mfhelpNavBar.find("#mf-help-prevbtn").on("click",function(a){a.preventDefault(),1==page?($(this).hide(),cargar_page(-1)):0!=page&&cargar_page(-1),$mfhelpNavBar.find("#mf-help-nextbtn").show()}).hide(),$mfhelpNavBar.find("#mf-help-nextbtn").on("click",function(a){a.preventDefault(),0==$(".mfhelp-page-"+(page+2)).length?($(this).hide(),cargar_page(1)):cargar_page(1),$mfhelpNavBar.find("#mf-help-prevbtn").show()})}else $("[data-mfhelp-title]").each(function(a,b){helps.charge_help(a,$(b))})},$(document).ready(function(){$("body").hasClass("show_help")&&(void 0==$.cookie("show-help")||eval($.cookie("show-help")))&&setTimeout(function(){$mf.my_draw_helps=new $mf.draw_helps},1e3)}),this.charge_help=function(index,$helpObject){var helpData=$helpObject.data();$helpObject.addClass("mfhelp-item"),$("#mf-help-overlay").append('<div class="mf-help-tip" id="mf-help-item-'+index+'"></div>');var helpItem={id:"#mf-help-item-"+index,text:null,background:null,title:'<h6 class="mf-help-title">'+helpData.mfhelpTitle+"</h6>"};helpData.mfhelpText&&(helpItem.text='<p class="mf-help-text">'+helpData.mfhelpText+"</p>");var offset=$helpObject.offset(),$helpItem=$(helpItem.id);if(helpData.mfhelpFrame){var itemFrame='<div id="mf-help--item-frame-'+index+'" class="mf-help-frame"></div>';$("#mf-help-frames").append(itemFrame),$("#mf-help--item-frame-"+index).width($helpObject.width()+20).height($helpObject.height()+20).css({left:offset.left-10,top:offset.top-10,position:"absolute"})}if($helpItem.append(helpItem.title,helpItem.text),helpData.mfhelpPos){var top=function(){$helpItem.addClass("top"),$mf.position($helpItem,$helpObject,"top","center",!1,!0)},right=function(){$helpItem.addClass("right"),$mf.position($helpItem,$helpObject,"top","right",!0,!1)},bottom=function(){$helpItem.addClass("bottom"),$mf.position($helpItem,$helpObject,"bottom","left",!1,!0)},left=function(){$helpItem.addClass("left"),$mf.position($helpItem,$helpObject,"center","left",!0,!1)};eval(helpData.mfhelpPos)()}else $helpItem.addClass("left"),$mf.position($helpItem,$helpObject,"center","left",!0,!1)},function(a,b){"use strict";var c=function(){var a,c={delay:5e3,close:function(c,d){var e=d&&!isNaN(d)?+d:this.delay,f=function(c){var d=function(b){b.remove(),0==a.children().length&&a.addClass("mf-alerts-hidden")};void 0!==c&&c.parent(a).length>0&&(b("html").hasClass("csstransforms")?(c.addClass("mf-alert-log-hide"),c.one("transitionend",function(a){a.stopPropagation(),d(c)})):d(c))};c.on("click",function(){f(c)}),0!==d&&setTimeout(function(){f(c)},e)},init:function(){void 0==a&&(a=b("<section id='mf-alerts' class='mf-alerts mf-alert-container mf-alerts-hidden'></section>").appendTo("body"))},log:function(b,c,d){return this.init(),a.removeClass("mf-alerts-hidden"),this.notify(b,c,d)},notify:function(c,d,e){var f=b("<article class='mf-alert-log'></article>").addClass("string"==typeof d&&""!==d?" mf-alert-"+d:"").html(c).appendTo(a);return setTimeout(function(){f.addClass("mf-alert-show")},50),this.close(f,e),f}};return{init:c.init,log:function(a,b,d){return c.log(a,b,d)},success:function(a,b){return c.log(a,"success",b)},error:function(a,b){return c.log(a,"error",b)}}};"function"==typeof define?define([],function(){return new c}):void 0===a.messages&&(a.messages=new c)}(this,$),$mf.Paginator=function(a){var b=function(a,b){$(b).find("div.mf-pager--results>select").change(c),$(b).find("div.mf-pager--page>select").change(c),$(b).find("div.mf-pager--page>ul>li").click(c),$(b).find("button.mf-pager--btn").click(c)},c=function(a){a.preventDefault();var b=$(a.currentTarget),c=b.data(),e=a.currentTarget.href||c.url,f=b.closest($(".mf-pager")).data("container")||"grid_",g=b.closest("div[id^="+f+"]");"change"==a.type&&(e+=b.val()),$mf.timer.on(g),$.get(e).done(function(a){d(a,g)})},d=function(a,b){var c=$(a);c.attr("id");b.replaceWith(c),$mf.timer.off(),$mf.init_widgets(c)};a?a.find(".mf-pager").each(b):$(".mf-pager").each(b)},$mf.position=function(a,b,c,d,e,f,g){var h={top:0,left:0},i={top:function(){},center:function(){h.top=$(window).outerHeight()/2-a.outerHeight()/2},bottom:function(){h.top=$(window).outerHeight()-a.outerHeight()}},j={top:function(){e||(h.top=h.top-a.outerHeight())},center:function(){h.top=h.top+b.outerHeight()/2-a.outerHeight()/2},bottom:function(){h.top=e?h.top+b.outerHeight()-a.outerHeight():h.top+b.outerHeight()}},k={left:function(){},center:function(){h.left=$(window).outerWidth()/2-a.outerWidth()/2},right:function(){h.left=$(window).outerWidth()-a.outerWidth()}},l={left:function(){f||(h.left=h.left-a.outerWidth())},center:function(){h.left=h.left+b.outerWidth()/2-a.outerWidth()/2},right:function(){h.left=f?h.left+b.outerWidth()-a.outerWidth():h.left+b.outerWidth()}};return void 0!=b&&b.length>0?(h={top:b.position().top-$(window).scrollTop(),left:b.position().left-$(window).scrollLeft()},c&&j[c](),d&&l[d]()):(c&&i[c](),d&&k[d]()),function(){h.left=h.left<0?0:h.left+a.outerWidth()>$(window).outerWidth()?$(window).outerWidth()-a.outerWidth():h.left,h.top=h.top<0?0:h.top+a.outerHeight()>$(window).outerHeight()?$(window).outerHeight()-a.outerHeight():h.top}(),g||a.css(h),h},$mf.Marquesina=function(a,b){var c=function(a){if(a.find(".mf-scroll--replace-obj")){var b=a.find(".mf-scroll--replace-obj"),c=$(g),f=c.find(".mf-scroll-list");b.find("option").each(function(a,b){f.append('<li class="mf-scroll-list--item"><a href="'+b.value+'">'+b.text+"</a></li>")}),b.replaceWith(c)}e(a)&&d(a)},d=function(b){var c=b.find(".js-nav-btn-prev, .js-nav-btn-next"),d=b.find(".js-nav-btn-first, .js-nav-btn-last"),g=b.find(".js-nav-btn-active");void 0===a?c.on("mouseenter",function(a){var c=e(b);if(c){var d=$(a.currentTarget).hasClass("js-nav-btn-next")?c[0]:c[1];f(b.find(".mf-scroll-list"),d)}}).on("mouseleave",function(a){$(a.currentTarget).parent().find(".mf-scroll-list").stop()}):"click"==a&&(d.on("click",function(a){var c=e(b);if(c){var d=$(a.currentTarget).hasClass("js-nav-btn-last")?c[0]:c[1];f(b.find(".mf-scroll-list"),d)}}),g.on("click",function(a){var c=e(b),d=c[1]-b.find("li.active").position().left+b.find(".mf-scroll--wrapper").width()/8;if(d){var g=c[0]>d?c[0]:c[1]<d?c[1]:d;f(b.find(".mf-scroll-list"),g)}}),c.on("click",function(a){var c=e(b),d=b.find(".mf-scroll--wrapper").width();px=$(a.currentTarget).hasClass("js-nav-btn-next")?-d:d,px=c[0]>px?c[0]:c[1]<px?c[1]:px,px&&f(b.find(".mf-scroll-list"),px)}))},e=function(a){var b=a.find(".mf-scroll-list"),c=a.hasClass("mf-scroll--wrapper")?a:a.find(".mf-scroll--wrapper");if(c.width()-b.width()<0){a.addClass("is-scrolling");var d=c.width()-b.width(),e=""!=b[0].style.left?b[0].style.left.substring(0,b[0].style.left.length-2):0;return[d-(""!=e?e:0),Math.abs(e)>0?0-e:0]}return!1},f=function(a,b){a.stop().animate({left:"+="+b+"px"},2e3-1e3/Math.abs(b))},g='<div class="mf-scroll--container"><div class="mf-scroll--wrapper"><ul class="mf-scroll-list"></ul></div><a href="#!" class="mf-scroll-nav--btn nav-btn-prev js-nav-btn-prev">Anterior</a><a href="#!" class="mf-scroll-nav--btn nav-btn-next js-nav-btn-next">Siguiente</a></div>';this.refresh=function(a,b,c){var c=(b.position().left,void 0!=c?c:0);d(a),a.find(".mf-scroll-list").css("left",c+"px")},b?b.is(".mf-scroll")?c(b):b.find(".mf-scroll").each(function(a,b){c($(b))}):$(".mf-scroll").each(function(a,b){c($(b))})},$mf.Status=function(){var doStatus=function(){var self=this,action=null,options=null;this.$status=this,this.$content=this.$status.find(".mf-status--content");var content=this.$status.html();this.$status.empty(),this.$actions=$('<a href="#!" class="mf-status--action">'+content+"</a>").appendTo(this.$status).click(function(e){e.preventDefault();var obj=void 0!=self.$status.data("action")?eval(self.$status.data("action")):action;obj.apply(null,void 0!=self.$status.data("options")?eval(self.$status.data("options")):options)}),void 0==this.$status.data("action")&&this.$actions.hide(),this.setAction=function(a){action=a},this.setOptions=function(a){options=a}};$(".mf-status").each(function(a,b){var c=$(b);doStatus.call(c)})},$mf.Tabs=function($el){var init=function(){var $el=$(this),$list=$el.find("ul.mf-tabs--nav"),data=$list.data(),$contents=$el.find(".mf-tabs--tab-content"),pintar=function(a,b,c){var d=$el.find(c);$(a.target).trigger("update_tabs"),b.addClass("is-selected").attr("aria-selected","true").siblings().removeClass("is-selected").attr("aria-selected","false"),$el.hasClass("mf-tabs__slide")?($el.find(".mf-tabs--container").removeClass("is-hidden").attr("aria-hidden","false"),$el.find(".mf-tabs--container").children().css({left:-d.addClass("is-selected").attr("aria-selected","true").index()*$el.width()}),$el.find(".mf-tabs--container").css({height:d.outerHeight()})):d.removeClass("is-hidden").attr("aria-hidden","false"),data.empty&&!d.find(".tr-filter--close-btn").length&&$('<button class="tr-filter--close-btn" type="button"><span class="mf-icon mf-icon-close"></span>cerrar</button>').appendTo(d).on("click",close_tabs),data.hide_out&&$el.on("mouseleave",function(a){$list.trigger("close_tabs")}),$list.addClass("is-open")},click_handle=function(e){e.preventDefault();var $li=$(e.target).parent(),href=e.target.getAttribute("href");$el.hasClass("mf-tabs__slide")?$contents.removeClass("is-selected").attr("aria-selected","false"):$contents.addClass("is-hidden").attr("aria-hidden","true"),data.empty&&$li.hasClass("is-selected")?close_tabs():0!=href.indexOf("#")?window.location.href=href:pintar(e,$li,href);var fn=$el.data("on_tab_click");fn&&"function"==typeof(fn=eval(fn))&&fn(e)},hover_handle=function(a){a.preventDefault();var b=$(a.target).parent(),c=a.currentTarget.getAttribute("href");$el.hasClass("mf-tabs__slide")?$contents.removeClass("is-selected").attr("aria-selected","false"):$contents.addClass("is-hidden").attr("aria-hidden","true"),data.empty&&!b.hasClass("is-selected")&&(0!=c.indexOf("#")&&(c=a.currentTarget.getAttribute("data-content")),c&&0==c.indexOf("#")&&pintar(a,b,c))},click_over_handle=function(a){a.preventDefault();var b=a.currentTarget.getAttribute("href");0!=b.indexOf("#")&&(window.location.href=b)},close_tabs=function(){$list.removeClass("is-open").find(".is-selected").removeClass("is-selected").attr("aria-selected","false"),$el.hasClass("mf-tabs__slide")?$el.find(".mf-tabs--container").addClass("is-hidden").attr("aria-hidden","true"):$contents.addClass("is-hidden").attr("aria-hidden","true"),data.hide_out&&$(".mf-veil").hide().removeClass("mf-veil__tabs").off("click")};if($selected=$list.find(".is-selected"),$el.hasClass("mf-tabs__hover")?$list.on("mouseenter","li a",hover_handle).on("click","li a",click_over_handle):$list.on("click","li a",click_handle),$list.on("close_tabs",close_tabs),$el.hasClass("mf-tabs__slide"))$contents.each(function(a,b){$(b).css({width:$el.width()})}),$el.find(".mf-tabs--container").children().css({width:$el.width()*$contents.length});else{$contents.addClass("is-hidden").attr("aria-hidden","true");var open_first=$el.data("open_first");open_first&&($contents.parent().find("#"+open_first).removeClass("is-hidden").attr("aria-hidden","false"),$list.find('>li>.mf-tabs--nav-item[href="#'+open_first+'"]').parents("li").first().addClass("is-selected").attr("aria-selected","true"))}$selected.length?$selected.find("a").trigger("click"):data&&!data.empty&&$list.find("li:first a").trigger("click")};$el?$el.is(".mf-tabs")?init.call($el):$el.find(".mf-tabs").each(init):$(".mf-tabs").each(init)},$mf.timer={on:function($el){$el=void 0==$el?$("body"):$el;var hash=Math.random(),$veil=$el.find(".mf-veil.timer-veil");if($veil.length){var data=$veil.data("hash");data?(data=eval(data),data.push(hash)):data=[hash],$veil.data("hash",JSON.stringify(data))}else $('<div class="mf-veil timer-veil"><p class="loading-state"><span></span>Cargando...</p></div>').appendTo($el.css({position:"relative"})).data("hash",JSON.stringify([hash]));return hash},off:function($el,hash){$el=void 0==$el?$("body"):$el;var $veil=$el.find(".mf-veil.timer-veil");if(hash){var data=$veil.data("hash");data&&(data=eval(data),data.splice(data.indexOf(hash),1),data.length>0?$veil.data("hash",JSON.stringify(data)):$el.find(".timer-veil:first").remove())}else $el.find(".timer-veil:first").remove()}},$mf.TopBar=function(a){void 0===$mf.my_dialog&&($mf.my_dialog=new $mf.Dialog($("div.mf-dialog").empty()));var b=function(a,b){$(b).click(function(a){a.preventDefault(),$a=$(b).children("a"),$mf.my_dialog.appendDialog({url:$a.attr("href"),title:$a.html(),position_v:"center",position_h:"center",init_dialog:function(a){$mf.DataGrid(a),$mf.Paginator(a)}},!1,!0)})},c=function(a){a.find(".show_all").each(b),a.find(".first>a>span").each(function(a,b){var c=$.trim($(b).text());$(b).text(c.length>25?c.substr(0,10)+"... ..."+c.substr(c.length-10,10):c)})};a?a.is("#userMenu")?c(a):a.find("#userMenu").each(function(a,b){c($(b))}):$("#userMenu").each(function(a,b){c($(b))})},$mf.Visualizer=function($el){var jumpfactor=.1,ampliar=function(a){a.preventDefault();var b=$(a.currentTarget).closest(".mf-visualizer--container").data();b.data=$(a.currentTarget).closest(".mf-visualizer--container").find(".org-chart-wrapper").clone(!0),b.buttons=add_buttons($(a.currentTarget).closest(".mf-visualizer--container")).children(),b.close='(function(){$mf.my_dialog.$el.find(".mf-visualizer--toolbar").remove()})',b.visualizer=!0,b.$reference=$(a.currentTarget).parent().siblings(),$.extend(b,{position_v:"top",position_h:"left"}),$mf.my_dialog.appendDialog(b,!1,!0),b.buttons.parent().attr({"data-zoom_new":$(a.currentTarget).parent().attr("data-zoom_new"),"data-zoom":$(a.currentTarget).parent().attr("data-zoom")}).find(".mf-visualizer--tool__ampliar").remove()},zoom_in=function(a){var b=$(a.currentTarget).parent(),c=b.closest(".mf-visualizer--container, .mf-dialog.mf-visualizer").find(".org-chart-wrapper").children(),d=Number(b.attr("data-zoom")),e=b.attr("data-zoom_new");e=e?Number(e):d,e=e+jumpfactor<5?e+jumpfactor:5,b.attr("data-zoom_new",e),c.css({transform:"scale("+e+")","-webkit-transform":"scale("+e+")","-moz-transform":"scale("+e+")","-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0"})},zoom_out=function(a){var b=$(a.currentTarget).parent(),c=b.closest(".mf-visualizer--container, .mf-dialog.mf-visualizer").find(".org-chart-wrapper").children(),d=Number(b.attr("data-zoom")),e=b.attr("data-zoom_new");e=e?Number(e):d,e=e-jumpfactor>d?e-jumpfactor:d,b.attr("data-zoom_new",e),c.css({transform:"scale("+e+")","-webkit-transform":"scale("+e+")","-moz-transform":"scale("+e+")","-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0"})},zoom_zero=function(a){var b=$(a.currentTarget).parent(),c=b.closest(".mf-visualizer--container, .mf-dialog.mf-visualizer").find(".org-chart-wrapper").children(),d=b.attr("data-zoom");1!=b.attr("data-zoom_new")?(b.attr("data-zoom_new",1),d=1):b.attr("data-zoom_new",d),c.css({transform:"scale("+d+")","-webkit-transform":"scale("+d+")","-moz-transform":"scale("+d+")","-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0"})},init_zoom=function(a,b){if(b[0]&&a){var c=b.width()/(1.1*b[0].scrollWidth);a.attr("data-zoom",c),b.children().css({transform:"scale("+c+")","-webkit-transform":"scale("+c+")","-moz-transform":"scale("+c+")","-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0"}).addClass("mf-visualizer--zoom")}},add_buttons=function(a){var $el=$(a),$buttons=$('<div class="mf-visualizer--toolbar"></div>'),data=$el.data();return init_zoom($buttons,$el.children(".org-chart-wrapper")),$('<button class="mf-visualizer--tool mf-visualizer--tool__ampliar"><span class="mf-icon mf-icon-max-window"></span> Ampliar ventana</button>').appendTo($buttons).on("click",ampliar),$('<button class="mf-visualizer--tool mf-visualizer--tool__zoom_in"><span class="mf-icon mf-icon-search-plus"></span> Acercar</button>').appendTo($buttons).on("click",zoom_in),$('<button class="mf-visualizer--tool mf-visualizer--tool__zoom_out"><span class="mf-icon mf-icon-search-minus"></span> Alejar</button>').appendTo($buttons).on("click",zoom_out),$('<button class="mf-visualizer--tool mf-visualizer--tool__zoom_zero"><span class="mf-icon mf-icon-search"></span> 1:1</button>').appendTo($buttons).on("click",zoom_zero),data.buttons_ext&&$.each(eval(data.buttons_ext),function(i,a){$('<button class="mf-visualizer--tool '+a[0]+'">'+a[1]+"</button>").appendTo($buttons).on("click",function(e){eval(a[2])(e)})}),$buttons};$el?$el.find(".mf-visualizer--container").each(function(a,b){$(b).prepend(add_buttons(b))}):$(".mf-visualizer--container").each(function(a,b){$(b).prepend(add_buttons(b))})},$mf.init_widgets=function(a){function b(a,b){"function"==typeof $mf[a]&&$mf[a].apply($mf,b)}$mf.my_dialog=$mf.my_dialog||new $mf.Dialog($("div.mf-dialog").empty());var c=[["Cookies",[a]],["TopBar",[]],["Marquesina",[void 0,a]],["Formulario",[a]],["autocomplete",[a]],["DataGrid",[a]],["dropdown",[a]],["Datepicker",[a]],["Paginator",[a]],["Tabs",[a]],["ConfNav",[a]],["dyn_combo",[a]],["AjaxModal",[a]],["Visualizer",[a]]];$(c).each(function(a,c){b.apply($mf,c)}),$mf.my_status=$mf.my_status||new $mf.Status,$(".mf-veil").length||$('<div class="mf-veil"></div>').appendTo($("body")).hide()},$(document).ready(function(){$mf.init_widgets()});